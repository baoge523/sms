(function(e){function t(t){for(var r,i,s=t[0],l=t[1],u=t[2],c=0,m=[];c<s.length;c++)i=s[c],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&m.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(m.length)m.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var l=n[i];0!==o[l]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},a=[];function i(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-0d28f26e":"95b992af","chunk-19af2ee3":"4c5f3bff","chunk-1a09a8b0":"165e5d6c","chunk-271854e9":"d4f36941","chunk-2d21e091":"f326577d","chunk-4b06d81a":"8b07eee9","chunk-71385c30":"a0f9b917","chunk-7484355d":"c3ea4370","chunk-7e971c79":"1eac2874"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=r);var a,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=i(e);var u=new Error;a=function(t){l.onerror=l.onload=null,clearTimeout(c);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",u.name="ChunkLoadError",u.type=r,u.request=a,n[1](u)}o[e]=void 0}};var c=setTimeout((function(){a({type:"timeout",target:l})}),12e4);l.onerror=l.onload=a,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"039a":function(e,t,n){"use strict";n("7174")},"37a2":function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s}));var r=n("b775"),o=function(e){return Object(r["c"])("/uiapi/v1/user/list",e)},a=function(e){return Object(r["c"])("/uiapi/v1/user/register",e)},i=function(e){return Object(r["a"])("/uiapi/v1/user/delete",e)},s=function(e){return Object(r["d"])("/uiapi/v1/user/update",e)}},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],i={name:"App",components:{}},s=i,l=(n("034f"),n("2877")),u=Object(l["a"])(s,o,a,!1,null,null,null),c=u.exports,d=n("5c96"),m=n.n(d),p=(n("0fae"),n("d3b7"),n("8c4f")),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"loginForm",staticClass:"loginContainer",attrs:{rules:e.rules,"element-loading-text":"正在登录...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",model:e.loginForm}},[n("h3",{staticClass:"loginTitle"},[e._v("市场管理后台系统")]),n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{size:"normal",type:"text","auto-complete":"off",placeholder:"请输入用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{size:"normal",type:"password","auto-complete":"off",placeholder:"请输入密码"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),n("el-checkbox",{staticClass:"loginRemember",attrs:{size:"normal"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),n("el-button",{staticStyle:{width:"100%"},attrs:{size:"normal",type:"primary"},on:{click:e.submitLogin}},[e._v("登录")]),n("el-button",{staticStyle:{width:"100%"},attrs:{size:"normal",type:"text"},on:{click:e.submitRegister}},[e._v("注册用户")])],1)],1)},h=[],b=(n("ac1f"),n("5319"),n("b775")),g={name:"Login",data:function(){return{loading:!1,loginForm:{username:"SmsAdmin",password:"password"},checked:!0,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{submitLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return e.$message.error("请输入所有字段"),!1;e.loading=!0,Object(b["c"])("/admin/login",e.loginForm).then((function(t){if(e.loading=!1,t){window.sessionStorage.setItem("user",JSON.stringify(t.data));e.$route.query.redirect;e.$router.replace("/home")}}))}))},submitRegister:function(){this.$router.replace("/register")}}},v=g,w=(n("039a"),Object(l["a"])(v,f,h,!1,null,null,null)),k=w.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-container",[n("el-header",{staticClass:"homeHeader"},[n("div",{staticClass:"title"},[e._v("摊位后台管理系统")]),n("div",[n("el-dropdown",{staticClass:"userInfo",on:{command:e.commandHandler}},[n("span",{staticClass:"el-dropdown-link"},[e._v(e._s(e.user.username))]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"userInfo"}},[e._v("个人中心")]),n("el-dropdown-item",{attrs:{command:"setting"}},[e._v("设置")]),n("el-dropdown-item",{attrs:{command:"logout",divided:""}},[e._v("注销登录")])],1)],1)],1)]),n("el-container",[n("el-aside",{attrs:{width:"200px"}},[n("el-menu",{attrs:{router:"","unique-opened":""}},e._l(e.routes,(function(t,r){return!t.hidden&&t.meta.roles.indexOf(e.user.userType)>-1?n("el-submenu",{key:r,attrs:{index:t.path+""}},[n("template",{slot:"title"},[n("span",[e._v(e._s(t.name))])]),e._l(t.children,(function(r,o){return r.meta.roles.indexOf(e.user.userType)>-1?n("el-menu-item",{key:o,attrs:{index:t.path+"/"+r.path}},[e._v(" "+e._s(r.name)+" ")]):e._e()}))],2):e._e()})),1)],1),n("el-main",["/home"!=this.$route.path?n("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),n("el-breadcrumb-item",[e._v(e._s(this.$route.name))])],1):e._e(),"/home"==this.$route.path?n("div",{staticClass:"homeWelcome"},[e._v(" 欢迎来到摊位后台管理系统！ ")]):e._e(),n("router-view",{staticClass:"homeRouterView"})],1)],1)],1)],1)},x=[],_={name:"Home",data:function(){return{user:JSON.parse(window.sessionStorage.getItem("user"))}},computed:{routes:function(){return console.log(this.$router.options.routes),this.$router.options.routes[1].children}},methods:{commandHandler:function(e){var t=this;"logout"==e&&this.$confirm("此操作将注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(b["b"])("/admin/logout").then((function(e){window.sessionStorage.removeItem("user"),t.$router.replace("/")}))})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))}}},D=_,$=(n("8b71"),Object(l["a"])(D,y,x,!1,null,null,null)),O=$.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"form",staticClass:"loginContainer",attrs:{model:e.formData,rules:e.rules,"label-width":"200px",size:"medium"}},[n("el-form-item",{attrs:{label:"用户账号",prop:"code"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1),n("el-form-item",{attrs:{label:"用户名称",prop:"name"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{staticStyle:{width:"350px"},attrs:{type:"password",autocomplete:"off"},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1),n("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[n("el-input",{staticStyle:{width:"350px"},attrs:{type:"password",autocomplete:"off"},model:{value:e.formData.checkPassword,callback:function(t){e.$set(e.formData,"checkPassword",t)},expression:"formData.checkPassword"}})],1),n("el-form-item",{attrs:{label:"电话号码",prop:"phone"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:e.formData.phone,callback:function(t){e.$set(e.formData,"phone",t)},expression:"formData.phone"}})],1),n("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}})],1),n("el-form-item",{attrs:{label:"身份证号",prop:"idCard"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:e.formData.idCard,callback:function(t){e.$set(e.formData,"idCard",t)},expression:"formData.idCard"}})],1),n("el-form-item",{attrs:{label:"描述",prop:"description"}},[n("el-input",{staticStyle:{width:"350px"},attrs:{type:"textarea",rows:"3"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.doCreate}},[e._v("立刻注册")]),n("el-button",{attrs:{type:"primary"},on:{click:e.returnView}},[e._v("返回")])],1)],1)],1)},S=[],j=(n("a4d3"),n("e01a"),n("b0c0"),n("37a2")),P={name:"register",data:function(){var e=this,t=function(t,n,r){""===n?r(new Error("请输入密码")):(""!==e.formData.checkPassword&&e.$refs.ruleForm.validateField("checkPassword"),r())},n=function(t,n,r){""===n?r(new Error("请再次输入密码")):n!==e.formData.password?r(new Error("两次输入密码不一致!")):r()};return{formData:{id:null,code:null,name:null,password:null,checkPassword:null,phone:null,email:null,idCard:null,isManager:null,description:null},rules:{password:[{validator:t,trigger:"blur"}],checkPassword:[{validator:n,trigger:"blur"}]}}},methods:{initFormData:function(e){this.formData=null!=e?{id:e.id,code:e.code,name:e.name,password:e.password,phone:e.phone,email:e.email,idCard:e.idCard,isManager:e.isManager,description:e.description}:{id:null,code:null,name:null,password:null,phone:null,email:null,idCard:null,isManager:null,description:null}},doCreate:function(){var e=this;Object(j["a"])(this.formData).then((function(t){e.initFormData(),e.$message({message:"注册成功,并返回登录页面",type:"success"}),setTimeout((function(){}),2e3),e.$router.replace("/home")}))},returnView:function(){this.$router.replace("/home")}}},F=P,E=(n("b45e"),Object(l["a"])(F,C,S,!1,null,"20f92561",null)),T=E.exports;r["default"].use(p["a"]);var M=[{path:"/",name:"Login",component:k,hidden:!0},{path:"/home",name:"Home",component:O,hidden:!0,meta:{roles:["admin","user"]},children:[{path:"/heal",name:"首页",hidden:!1,component:{render:function(e){return e("router-view")}},meta:{roles:["admin","user"]},children:[{path:"info",name:"健康信息管理",component:function(){return n.e("chunk-2d21e091").then(n.bind(null,"d49d"))},hidden:!0,meta:{roles:["admin","user"]}}]},{path:"/base",name:"基础管理",component:{render:function(e){return e("router-view")}},hidden:!1,meta:{roles:["admin","user"]},children:[{path:"bazaars",name:"市场管理",component:function(){return n.e("chunk-4b06d81a").then(n.bind(null,"9076"))},hidden:!0,meta:{roles:["admin"]}},{path:"stalls",name:"摊位管理",component:function(){return n.e("chunk-19af2ee3").then(n.bind(null,"181d"))},hidden:!0,meta:{roles:["admin"]}},{path:"apply/manager/list",name:"摊位申请列表",component:function(){return n.e("chunk-7e971c79").then(n.bind(null,"034e"))},hidden:!0,meta:{roles:["admin"]}},{path:"apply",name:"摊位申请",component:function(){return n.e("chunk-271854e9").then(n.bind(null,"890c"))},hidden:!0,meta:{roles:["user"]}},{path:"apply/list",name:"摊位申请列表",component:function(){return n.e("chunk-1a09a8b0").then(n.bind(null,"7d33"))},hidden:!0,meta:{roles:["user"]}}]},{path:"/identity",name:"人员信息管理",component:{render:function(e){return e("router-view")}},hidden:!1,meta:{roles:["admin"]},children:[{path:"userManager",name:"用户管理",component:function(){return n.e("chunk-7484355d").then(n.bind(null,"55245"))},hidden:!0,meta:{roles:["admin"]}}]},{path:"/inform",name:"消息管理",component:{render:function(e){return e("router-view")}},hidden:!1,meta:{roles:["admin","user"]},children:[{path:"message",name:"系统公告",component:function(){return n.e("chunk-71385c30").then(n.bind(null,"98a6"))},hidden:!0,meta:{roles:["admin"]}},{path:"notice",name:"系统通知",component:function(){return n.e("chunk-0d28f26e").then(n.bind(null,"55e3"))},hidden:!0,meta:{roles:["user"]}}]}]},{path:"/register",name:"register",component:T,hidden:!0}],z=new p["a"]({routes:M}),I=z;I.beforeEach((function(e,t,n){"/"==e.path||"/register"==e.path||window.sessionStorage.getItem("user")?n():n("/?redirect="+e.path)})),r["default"].use(m.a,{size:"small"}),r["default"].config.productionTip=!1,new r["default"]({router:I,render:function(e){return e(c)}}).$mount("#app")},7174:function(e,t,n){},"85ec":function(e,t,n){},"88d7":function(e,t,n){},"8b71":function(e,t,n){"use strict";n("88d7")},af03:function(e,t,n){},b45e:function(e,t,n){"use strict";n("af03")},b775:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u}));var r=n("bc3a"),o=n.n(r);n("5c96");o.a.interceptors.request.use((function(e){var t=JSON.parse(window.sessionStorage.getItem("user"));return null!=t&&null!=t.token&&(e.headers["Authentication"]=t.token),e}));var a="",i=function(e,t){return o()({method:"post",url:"".concat(a).concat(e),data:t})},s=function(e,t){return o()({method:"put",url:"".concat(a).concat(e),data:t})},l=function(e,t){return o()({method:"get",url:"".concat(a).concat(e),data:t})},u=function(e,t){return o()({method:"delete",url:"".concat(a).concat(e),data:t})}}});
//# sourceMappingURL=app.da22f1ed.js.map