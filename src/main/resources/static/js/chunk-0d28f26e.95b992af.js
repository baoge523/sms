(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d28f26e"],{"55e3":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"40px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.queryParam}},[a("el-form-item",{attrs:{label:"消息头"}},[a("el-input",{attrs:{placeholder:"消息头",clearable:""},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1),a("el-form-item",{attrs:{label:"消息状态"}},[a("el-select",{attrs:{placeholder:"",clearable:""},on:{clear:function(t){return e.selectClear("status")}},model:{value:e.queryParam.conditions.status,callback:function(t){e.$set(e.queryParam.conditions,"status",t)},expression:"queryParam.conditions.status"}},e._l(e.messageStatus,(function(e){return a("el-option",{attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"消息等级"}},[a("el-select",{attrs:{placeholder:"",clearable:""},on:{clear:function(t){return e.selectClear("level")}},model:{value:e.queryParam.conditions.level,callback:function(t){e.$set(e.queryParam.conditions,"level",t)},expression:"queryParam.conditions.level"}},e._l(e.messageLevels,(function(e){return a("el-option",{attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.listData,stripe:""}},[a("el-table-column",{attrs:{prop:"header",label:"消息头",width:"430"}}),a("el-table-column",{attrs:{prop:"level",label:"消息等级",width:"300",formatter:e.formatLevel}}),a("el-table-column",{attrs:{prop:"readStatus",label:"消息状态",formatter:e.formatStatus}}),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.detail(t.row)}}},[e._v("详情")])]}}])})],1),a("el-row",{staticStyle:{"margin-top":"25px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:4,offset:18}},[a("el-pagination",{attrs:{background:"",layout:e.pageInfo.layout,total:e.pageInfo.total}})],1)],1),a("el-dialog",{attrs:{title:"创建消息",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.formData,"label-width":"200px",size:"medium"}},[a("el-form-item",{attrs:{label:"消息头",prop:"header"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{disabled:e.isDetail},model:{value:e.formData.header,callback:function(t){e.$set(e.formData,"header",t)},expression:"formData.header"}})],1),a("el-form-item",{attrs:{label:"消息内容",prop:"content"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{type:"textarea",rows:"15",disabled:e.isDetail},model:{value:e.formData.content,callback:function(t){e.$set(e.formData,"content",t)},expression:"formData.content"}})],1),a("el-form-item",{attrs:{label:"消息等级",prop:"level"}},[a("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:"",disabled:e.isDetail},model:{value:e.formData.level,callback:function(t){e.$set(e.formData,"level",t)},expression:"formData.level"}},e._l(e.messageLevels,(function(e){return a("el-option",{attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},n=[],r=a("ff1d"),i={name:"userList",data:function(){return{listData:[],queryParam:{pageNumber:1,pageSize:10,name:null,conditions:{status:null,level:null,userId:JSON.parse(window.sessionStorage.getItem("user")).userId}},dialogVisible:!1,formData:{id:null,header:null,content:null,level:null,readStatus:null},managerList:[{name:"SmsAdmin",code:"SmsAdmin"}],pageInfo:{layout:"prev, pager, next, jumper, total",total:10},messageLevels:[{name:"一般",value:1},{name:"中等",value:2},{name:"重要",value:3}],messageStatus:[{name:"未读",value:0},{name:"已读",value:1}],isDetail:!0}},created:function(){this.onSubmit()},methods:{listMessages:function(){var e=this;Object(r["d"])(this.queryParam).then((function(t){e.listData=t.data.first,e.pageInfo.total=t.data.second}))},onSubmit:function(){this.listMessages()},formatLevel:function(e,t){return 1===e.level?"一般":2===e.level?"中等":"重要"},formatStatus:function(e,t){return 0===e.readStatus?"未读":"已读"},initFormData:function(e){this.formData=null!=e?{id:e.id,header:e.header,content:e.content,level:e.level,readStatus:e.readStatus}:{id:null,header:null,content:null,level:null,readStatus:null}},detail:function(e){var t=this;this.initFormData(e),this.dialogVisible=!0,Object(r["g"])(this.queryParam.conditions.userId,e.id).then((function(e){t.listMessages()}))},selectClear:function(e){this.queryParam.conditions[e]=null}}},s=i,o=a("2877"),u=Object(o["a"])(s,l,n,!1,null,"7d506ed0",null);t["default"]=u.exports},ff1d:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"f",(function(){return o})),a.d(t,"d",(function(){return u})),a.d(t,"g",(function(){return c}));var l=a("b775"),n=function(e){return Object(l["c"])("/uiapi/v1/message/list",e)},r=function(e){return Object(l["c"])("/uiapi/v1/message/add",e)},i=function(e){return Object(l["c"])("/uiapi/v1/message/send",e)},s=function(e){return Object(l["a"])("/uiapi/v1/message/delete",e)},o=function(e){return Object(l["d"])("/uiapi/v1/message/update",e)},u=function(e){return Object(l["c"])("/uiapi/v1/message/list/user",e)},c=function(e,t){return Object(l["d"])("/uiapi/v1/message/update/relation?userId="+e+"&messageId="+t,null)}}}]);
//# sourceMappingURL=chunk-0d28f26e.95b992af.js.map