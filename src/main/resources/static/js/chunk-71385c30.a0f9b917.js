(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71385c30"],{"98a6":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"40px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.queryParam}},[a("el-form-item",{attrs:{label:"消息头"}},[a("el-input",{attrs:{placeholder:"消息头",clearable:""},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1),a("el-form-item",{attrs:{label:"消息状态"}},[a("el-select",{attrs:{placeholder:"",clearable:""},on:{clear:function(t){return e.selectClear("level")}},model:{value:e.queryParam.conditions.status,callback:function(t){e.$set(e.queryParam.conditions,"status",t)},expression:"queryParam.conditions.status"}},e._l(e.messageStatus,(function(e){return a("el-option",{attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"消息等级"}},[a("el-select",{attrs:{placeholder:"",clearable:""},on:{clear:function(t){return e.selectClear("level")}},model:{value:e.queryParam.conditions.level,callback:function(t){e.$set(e.queryParam.conditions,"level",t)},expression:"queryParam.conditions.level"}},e._l(e.messageLevels,(function(e){return a("el-option",{attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1),a("el-button",{attrs:{type:"primary"},on:{click:e.create}},[e._v("创建")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.listData,stripe:""}},[a("el-table-column",{attrs:{prop:"header",label:"消息头",width:"380"}}),a("el-table-column",{attrs:{prop:"level",label:"消息等级",width:"180",formatter:e.formatLevel}}),a("el-table-column",{attrs:{prop:"status",label:"消息状态",formatter:e.formatStatus}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"sendTime",label:"发送时间",formatter:e.formatSendTime}}),a("el-table-column",{attrs:{prop:"creator",label:"创建者"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.detail(t.row)}}},[e._v("详情")]),0===t.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.send(t.row)}}},[e._v("发送")]):e._e(),0===t.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.update(t.row)}}},[e._v("修改")]):e._e(),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.doDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("el-row",{staticStyle:{"margin-top":"25px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:4,offset:18}},[a("el-pagination",{attrs:{background:"",layout:e.pageInfo.layout,total:e.pageInfo.total}})],1)],1),a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.formData,"label-width":"200px",size:"medium"}},[a("el-form-item",{attrs:{label:"消息头",prop:"header",disabled:e.isDetail}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.formData.header,callback:function(t){e.$set(e.formData,"header",t)},expression:"formData.header"}})],1),a("el-form-item",{attrs:{label:"消息内容",prop:"content",disabled:e.isDetail}},[a("el-input",{staticStyle:{width:"350px"},attrs:{type:"textarea",rows:"15"},model:{value:e.formData.content,callback:function(t){e.$set(e.formData,"content",t)},expression:"formData.content"}})],1),a("el-form-item",{attrs:{label:"消息等级",prop:"level",disabled:e.isDetail}},[a("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:""},model:{value:e.formData.level,callback:function(t){e.$set(e.formData,"level",t)},expression:"formData.level"}},e._l(e.messageLevels,(function(e){return a("el-option",{attrs:{label:e.name,value:e.value}})})),1)],1),e.isDetail?a("el-form-item",{attrs:{label:"消息状态",prop:"status",disabled:e.isDetail}},[a("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:""},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}},e._l(e.messageStatus,(function(e){return a("el-option",{attrs:{label:e.name,value:e.value}})})),1)],1):e._e(),e.isDetail?a("el-form-item",{attrs:{label:"创建时间",prop:"createTime",disabled:e.isDetail}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.formData.createTime,callback:function(t){e.$set(e.formData,"createTime",t)},expression:"formData.createTime"}})],1):e._e(),e.isDetail?a("el-form-item",{attrs:{label:"发送时间",prop:"sendTime",disabled:e.isDetail}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.formData.sendTime,callback:function(t){e.$set(e.formData,"sendTime",t)},expression:"formData.sendTime"}})],1):e._e(),e.isDetail?a("el-form-item",{attrs:{label:"创建人",prop:"creator",disabled:e.isDetail}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.formData.creator,callback:function(t){e.$set(e.formData,"creator",t)},expression:"formData.creator"}})],1):e._e(),e.isDetail?a("el-form-item",[a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1):e._e(),e.isDetail?e._e():a("el-form-item",[e.formData.id?a("el-button",{attrs:{type:"primary"},on:{click:e.doUpdate}},[e._v("保存")]):a("el-button",{attrs:{type:"primary"},on:{click:e.doCreate}},[e._v("立即创建")]),a("el-button",{attrs:{type:"primary"},on:{click:e.send}},[e._v("立即发送")]),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)},i=[],n=a("ff1d"),s={name:"managerList",data:function(){return{listData:[],queryParam:{pageNumber:1,pageSize:10,name:null,conditions:{status:null,level:null}},dialogVisible:!1,formData:{id:null,header:null,content:null,level:null,status:null,createTime:null,sendTime:null,creator:null},managerList:[{name:"SmsAdmin",code:"SmsAdmin"}],pageInfo:{layout:"prev, pager, next, jumper, total",total:10},messageLevels:[{name:"一般",value:1},{name:"中等",value:2},{name:"重要",value:3}],messageStatus:[{name:"保存未发送",value:0},{name:"已发送",value:1}],isDetail:!1,title:"创建消息"}},created:function(){this.onSubmit()},methods:{listMessages:function(){var e=this;Object(n["c"])(this.queryParam).then((function(t){e.listData=t.data.first,e.pageInfo.total=t.data.second}))},create:function(){this.dialogVisible=!0,this.initFormData()},doCreate:function(){var e=this;Object(n["a"])(this.formData).then((function(t){e.dialogVisible=!1,e.initFormData(),e.$message({message:"创建成功",type:"success"}),e.listMessages()}))},onSubmit:function(){this.listMessages()},formatLevel:function(e,t){return 1===e.level?"一般":2===e.level?"中等":"重要"},formatStatus:function(e,t){return 0===e.status?"保存未发送":"已发送"},formatSendTime:function(e,t){return null==e.sendTime?"-":e.sendTime},initFormData:function(e){this.formData=null!=e?{id:e.id,header:e.header,content:e.content,level:e.level,status:e.status,createTime:e.createTime,sendTime:e.sendTime,creator:e.creator}:{id:null,header:null,content:null,level:null,status:null,createTime:null,sendTime:null,creator:null}},send:function(){var e=this;Object(n["e"])(this.formData).then((function(t){e.dialogVisible=!1,e.initFormData(),e.$message({message:"发送成功",type:"success"}),e.listMessages()}))},update:function(e){this.title="编辑消息",this.initFormData(e),this.dialogVisible=!0},doUpdate:function(){var e=this;Object(n["f"])(this.formData).then((function(t){e.dialogVisible=!1,e.initFormData(),e.$message({message:"修改成功",type:"success"}),e.listMessages()})).catch((function(t){e.dialogVisible=!1,e.initFormData(),e.$message({message:"修改失败",type:"error"}),e.listMessages()}))},doDelete:function(e){var t=this,a=[];a.push(e.id),Object(n["b"])(a).then((function(e){t.$message({message:"删除成功",type:"success"}),t.listMessages()}))},detail:function(e){this.title="消息详情",this.initFormData(e),this.isDetail=!0,this.dialogVisible=!0},cancel:function(){this.dialogVisible=!1,this.isDetail=!1},selectClear:function(e){this.queryParam.conditions[e]=null}}},r=s,o=a("2877"),u=Object(o["a"])(r,l,i,!1,null,"67903434",null);t["default"]=u.exports},ff1d:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n})),a.d(t,"e",(function(){return s})),a.d(t,"b",(function(){return r})),a.d(t,"f",(function(){return o})),a.d(t,"d",(function(){return u})),a.d(t,"g",(function(){return c}));var l=a("b775"),i=function(e){return Object(l["c"])("/uiapi/v1/message/list",e)},n=function(e){return Object(l["c"])("/uiapi/v1/message/add",e)},s=function(e){return Object(l["c"])("/uiapi/v1/message/send",e)},r=function(e){return Object(l["a"])("/uiapi/v1/message/delete",e)},o=function(e){return Object(l["d"])("/uiapi/v1/message/update",e)},u=function(e){return Object(l["c"])("/uiapi/v1/message/list/user",e)},c=function(e,t){return Object(l["d"])("/uiapi/v1/message/update/relation?userId="+e+"&messageId="+t,null)}}}]);
//# sourceMappingURL=chunk-71385c30.a0f9b917.js.map