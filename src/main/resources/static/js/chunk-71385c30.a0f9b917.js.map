{"version":3,"sources":["webpack:///./src/views/base-manager/message-manager/managerList.vue?ec21","webpack:///src/views/base-manager/message-manager/managerList.vue","webpack:///./src/views/base-manager/message-manager/managerList.vue?a748","webpack:///./src/views/base-manager/message-manager/managerList.vue","webpack:///./src/api/messageApi.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","staticClass","attrs","queryParam","model","value","callback","$$v","$set","expression","on","$event","selectClear","conditions","_l","item","name","onSubmit","_v","create","listData","formatLevel","formatStatus","formatSendTime","scopedSlots","_u","key","fn","scope","detail","row","status","send","_e","update","doDelete","pageInfo","layout","total","title","dialogVisible","ref","formData","isDetail","cancel","doUpdate","doCreate","staticRenderFns","component","listMessage","params","postRequest","createMessage","sendMessage","deleteMessage","deleteRequest","updateMessage","putRequest","listMessageByUserId","updateMessageStatus","userId","messageId"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,CAAC,aAAa,SAAS,CAACF,EAAG,UAAU,CAACG,YAAY,mBAAmBC,MAAM,CAAC,QAAS,EAAK,MAAQR,EAAIS,aAAa,CAACL,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,QAAQ,CAACJ,EAAG,WAAW,CAACI,MAAM,CAAC,YAAc,MAAM,UAAY,IAAIE,MAAM,CAACC,MAAOX,EAAIS,WAAe,KAAEG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIS,WAAY,OAAQI,IAAME,WAAW,sBAAsB,GAAGX,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,YAAY,CAACI,MAAM,CAAC,YAAc,GAAG,UAAY,IAAIQ,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOjB,EAAIkB,YAAY,WAAWR,MAAM,CAACC,MAAOX,EAAIS,WAAWU,WAAiB,OAAEP,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIS,WAAWU,WAAY,SAAUN,IAAME,WAAW,iCAAiCf,EAAIoB,GAAIpB,EAAiB,eAAE,SAASqB,GAAM,OAAOjB,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQa,EAAKC,KAAK,MAAQD,EAAKV,YAAW,IAAI,GAAGP,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,YAAY,CAACI,MAAM,CAAC,YAAc,GAAG,UAAY,IAAIQ,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOjB,EAAIkB,YAAY,WAAWR,MAAM,CAACC,MAAOX,EAAIS,WAAWU,WAAgB,MAAEP,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIS,WAAWU,WAAY,QAASN,IAAME,WAAW,gCAAgCf,EAAIoB,GAAIpB,EAAiB,eAAE,SAASqB,GAAM,OAAOjB,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQa,EAAKC,KAAK,MAAQD,EAAKV,YAAW,IAAI,GAAGP,EAAG,eAAe,CAACA,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,WAAWQ,GAAG,CAAC,MAAQhB,EAAIuB,WAAW,CAACvB,EAAIwB,GAAG,SAAS,IAAI,GAAGpB,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,WAAWQ,GAAG,CAAC,MAAQhB,EAAIyB,SAAS,CAACzB,EAAIwB,GAAG,QAAQpB,EAAG,WAAW,CAACE,YAAY,CAAC,MAAQ,QAAQE,MAAM,CAAC,KAAOR,EAAI0B,SAAS,OAAS,KAAK,CAACtB,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,SAAS,MAAQ,MAAM,MAAQ,SAASJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,QAAQ,MAAQ,OAAO,MAAQ,MAAM,UAAYR,EAAI2B,eAAevB,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,SAAS,MAAQ,OAAO,UAAYR,EAAI4B,gBAAgBxB,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,aAAa,MAAQ,UAAUJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,WAAW,MAAQ,OAAO,UAAYR,EAAI6B,kBAAkBzB,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,UAAU,MAAQ,SAASJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,MAAQ,MAAMsB,YAAY9B,EAAI+B,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAAC9B,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,QAAQQ,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOjB,EAAImC,OAAOD,EAAME,QAAQ,CAACpC,EAAIwB,GAAG,QAA8B,IAArBU,EAAME,IAAIC,OAAcjC,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,QAAQQ,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOjB,EAAIsC,KAAKJ,EAAME,QAAQ,CAACpC,EAAIwB,GAAG,QAAQxB,EAAIuC,KAA2B,IAArBL,EAAME,IAAIC,OAAcjC,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,QAAQQ,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOjB,EAAIwC,OAAON,EAAME,QAAQ,CAACpC,EAAIwB,GAAG,QAAQxB,EAAIuC,KAAKnC,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,QAAQQ,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOjB,EAAIyC,SAASP,EAAME,QAAQ,CAACpC,EAAIwB,GAAG,gBAAgB,GAAGpB,EAAG,SAAS,CAACE,YAAY,CAAC,aAAa,QAAQE,MAAM,CAAC,OAAS,KAAK,CAACJ,EAAG,SAAS,CAACI,MAAM,CAAC,KAAO,EAAE,OAAS,KAAK,CAACJ,EAAG,gBAAgB,CAACI,MAAM,CAAC,WAAa,GAAG,OAASR,EAAI0C,SAASC,OAAO,MAAQ3C,EAAI0C,SAASE,UAAU,IAAI,GAAGxC,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQR,EAAI6C,MAAM,QAAU7C,EAAI8C,cAAc,MAAQ,OAAO9B,GAAG,CAAC,iBAAiB,SAASC,GAAQjB,EAAI8C,cAAc7B,KAAU,CAACb,EAAG,UAAU,CAAC2C,IAAI,OAAOvC,MAAM,CAAC,MAAQR,EAAIgD,SAAS,cAAc,QAAQ,KAAO,WAAW,CAAC5C,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,MAAM,KAAO,SAAS,SAAWR,EAAIiD,WAAW,CAAC7C,EAAG,WAAW,CAACE,YAAY,CAAC,MAAQ,SAASI,MAAM,CAACC,MAAOX,EAAIgD,SAAe,OAAEpC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIgD,SAAU,SAAUnC,IAAME,WAAW,sBAAsB,GAAGX,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,KAAO,UAAU,SAAWR,EAAIiD,WAAW,CAAC7C,EAAG,WAAW,CAACE,YAAY,CAAC,MAAQ,SAASE,MAAM,CAAC,KAAO,WAAW,KAAO,MAAME,MAAM,CAACC,MAAOX,EAAIgD,SAAgB,QAAEpC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIgD,SAAU,UAAWnC,IAAME,WAAW,uBAAuB,GAAGX,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,KAAO,QAAQ,SAAWR,EAAIiD,WAAW,CAAC7C,EAAG,YAAY,CAACE,YAAY,CAAC,MAAQ,SAASE,MAAM,CAAC,YAAc,IAAIE,MAAM,CAACC,MAAOX,EAAIgD,SAAc,MAAEpC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIgD,SAAU,QAASnC,IAAME,WAAW,mBAAmBf,EAAIoB,GAAIpB,EAAiB,eAAE,SAASqB,GAAM,OAAOjB,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQa,EAAKC,KAAK,MAAQD,EAAKV,YAAW,IAAI,GAAIX,EAAY,SAAEI,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,KAAO,SAAS,SAAWR,EAAIiD,WAAW,CAAC7C,EAAG,YAAY,CAACE,YAAY,CAAC,MAAQ,SAASE,MAAM,CAAC,YAAc,IAAIE,MAAM,CAACC,MAAOX,EAAIgD,SAAe,OAAEpC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIgD,SAAU,SAAUnC,IAAME,WAAW,oBAAoBf,EAAIoB,GAAIpB,EAAiB,eAAE,SAASqB,GAAM,OAAOjB,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQa,EAAKC,KAAK,MAAQD,EAAKV,YAAW,IAAI,GAAGX,EAAIuC,KAAMvC,EAAY,SAAEI,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,KAAO,aAAa,SAAWR,EAAIiD,WAAW,CAAC7C,EAAG,WAAW,CAACE,YAAY,CAAC,MAAQ,SAASI,MAAM,CAACC,MAAOX,EAAIgD,SAAmB,WAAEpC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIgD,SAAU,aAAcnC,IAAME,WAAW,0BAA0B,GAAGf,EAAIuC,KAAMvC,EAAY,SAAEI,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,KAAO,WAAW,SAAWR,EAAIiD,WAAW,CAAC7C,EAAG,WAAW,CAACE,YAAY,CAAC,MAAQ,SAASI,MAAM,CAACC,MAAOX,EAAIgD,SAAiB,SAAEpC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIgD,SAAU,WAAYnC,IAAME,WAAW,wBAAwB,GAAGf,EAAIuC,KAAMvC,EAAY,SAAEI,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,MAAM,KAAO,UAAU,SAAWR,EAAIiD,WAAW,CAAC7C,EAAG,WAAW,CAACE,YAAY,CAAC,MAAQ,SAASI,MAAM,CAACC,MAAOX,EAAIgD,SAAgB,QAAEpC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIgD,SAAU,UAAWnC,IAAME,WAAW,uBAAuB,GAAGf,EAAIuC,KAAMvC,EAAY,SAAEI,EAAG,eAAe,CAACA,EAAG,YAAY,CAACY,GAAG,CAAC,MAAQhB,EAAIkD,SAAS,CAAClD,EAAIwB,GAAG,SAAS,GAAGxB,EAAIuC,KAAOvC,EAAIiD,SAAwWjD,EAAIuC,KAAlWnC,EAAG,eAAe,CAAEJ,EAAIgD,SAAW,GAAE5C,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,WAAWQ,GAAG,CAAC,MAAQhB,EAAImD,WAAW,CAACnD,EAAIwB,GAAG,QAAQpB,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,WAAWQ,GAAG,CAAC,MAAQhB,EAAIoD,WAAW,CAACpD,EAAIwB,GAAG,UAAUpB,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,WAAWQ,GAAG,CAAC,MAAQhB,EAAIsC,OAAO,CAACtC,EAAIwB,GAAG,UAAUpB,EAAG,YAAY,CAACY,GAAG,CAAC,MAAQhB,EAAIkD,SAAS,CAAClD,EAAIwB,GAAG,SAAS,IAAa,IAAI,IAAI,IACt5L6B,EAAkB,G,YCiItB,GACE,KAAF,cACE,KAFF,WAGI,MAAJ,CACM,SAAN,GACM,WAAN,CACQ,WAAR,EACQ,SAAR,GACQ,KAAR,KACQ,WAAR,CACU,OAAV,KACU,MAAV,OAIM,eAAN,EACM,SAAN,CACQ,GAAR,KACQ,OAAR,KACQ,QAAR,KACQ,MAAR,KACQ,OAAR,KACQ,WAAR,KACQ,SAAR,KACQ,QAAR,MAEM,YAAN,CACA,CACQ,KAAR,WACQ,KAAR,aAGM,SAAN,CACQ,OAAR,mCACQ,MAAR,IAEM,cAAN,CACA,CACQ,KAAR,KACQ,MAAR,GAEA,CACQ,KAAR,KACQ,MAAR,GAEA,CACQ,KAAR,KACQ,MAAR,IAGM,cAAN,CACA,CACQ,KAAR,QACQ,MAAR,GAEA,CACQ,KAAR,MACQ,MAAR,IAGM,UAAN,EACM,MAAN,SAGE,QAhEF,WAiEI,KAAJ,YAEE,QAAF,CACI,aADJ,WACM,IAAN,OACM,OAAN,OAAM,CAAN,mCACQ,EAAR,sBACQ,EAAR,iCAGI,OAPJ,WAQM,KAAN,iBACM,KAAN,gBAEI,SAXJ,WAWM,IAAN,OACM,OAAN,OAAM,CAAN,iCACQ,EAAR,iBACQ,EAAR,eACQ,EAAR,UACU,QAAV,OACU,KAAV,YAEQ,EAAR,mBAGI,SAtBJ,WAuBM,KAAN,gBAEI,YAzBJ,SAyBA,KACM,OAAN,YACA,KACA,YACA,KAEA,MAGI,aAlCJ,SAkCA,KACM,OAAN,aACA,QAEA,OAGI,eAzCJ,SAyCA,KACM,OAAN,iBACA,IAEA,YAEI,aA/CJ,SA+CA,GAEQ,KAAR,SADA,QACA,CACU,GAAV,KACU,OAAV,SACU,QAAV,UACU,MAAV,QACU,OAAV,SACU,WAAV,aACU,SAAV,WACU,QAAV,WAGA,CACU,GAAV,KACU,OAAV,KACU,QAAV,KACU,MAAV,KACU,OAAV,KACU,WAAV,KACU,SAAV,KACU,QAAV,OAKI,KAzEJ,WAyEM,IAAN,OACM,OAAN,OAAM,CAAN,iCACQ,EAAR,iBACQ,EAAR,eACQ,EAAR,UACU,QAAV,OACU,KAAV,YAEQ,EAAR,mBAGI,OApFJ,SAoFA,GACM,KAAN,aACM,KAAN,gBACM,KAAN,kBAEI,SAzFJ,WAyFM,IAAN,OACM,OAAN,OAAM,CAAN,iCACQ,EAAR,iBACQ,EAAR,eACQ,EAAR,UACU,QAAV,OACU,KAAV,YAEQ,EAAR,kBACA,mBACQ,EAAR,iBACQ,EAAR,eACQ,EAAR,UACU,QAAV,OACU,KAAV,UAEQ,EAAR,mBAGI,SA5GJ,SA4GA,GAAM,IAAN,OACA,KACM,EAAN,WACM,OAAN,OAAM,CAAN,qBACQ,EAAR,UACU,QAAV,OACU,KAAV,YAEQ,EAAR,mBAGI,OAvHJ,SAuHA,GACM,KAAN,aACM,KAAN,gBACM,KAAN,YACM,KAAN,kBAEI,OA7HJ,WA8HM,KAAN,iBACM,KAAN,aAEI,YAjIJ,SAiIA,GACM,KAAN,iCCvUmX,I,YCO/WC,EAAY,eACd,EACAvD,EACAsD,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,2CClBf,8PAEaC,EAAc,SAACC,GACxB,OAAOC,eAAY,yBAA0BD,IAGpCE,EAAgB,SAACF,GAC1B,OAAOC,eAAY,wBAAyBD,IAGnCG,EAAc,SAACH,GACxB,OAAOC,eAAY,yBAA0BD,IAGpCI,EAAgB,SAACJ,GAC1B,OAAOK,eAAc,2BAA4BL,IAGxCM,EAAgB,SAACN,GAC1B,OAAOO,eAAW,2BAA4BP,IAIrCQ,EAAsB,SAACR,GAChC,OAAOC,eAAY,8BAA+BD,IAGzCS,EAAsB,SAACC,EAAOC,GACvC,OAAOJ,eAAW,4CAA8CG,EAAS,cAAgBC,EAAW","file":"js/chunk-71385c30.a0f9b917.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"margin-top\":\"40px\"}},[_c('el-form',{staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.queryParam}},[_c('el-form-item',{attrs:{\"label\":\"消息头\"}},[_c('el-input',{attrs:{\"placeholder\":\"消息头\",\"clearable\":\"\"},model:{value:(_vm.queryParam.name),callback:function ($$v) {_vm.$set(_vm.queryParam, \"name\", $$v)},expression:\"queryParam.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"消息状态\"}},[_c('el-select',{attrs:{\"placeholder\":\"\",\"clearable\":\"\"},on:{\"clear\":function($event){return _vm.selectClear('level')}},model:{value:(_vm.queryParam.conditions.status),callback:function ($$v) {_vm.$set(_vm.queryParam.conditions, \"status\", $$v)},expression:\"queryParam.conditions.status\"}},_vm._l((_vm.messageStatus),function(item){return _c('el-option',{attrs:{\"label\":item.name,\"value\":item.value}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"消息等级\"}},[_c('el-select',{attrs:{\"placeholder\":\"\",\"clearable\":\"\"},on:{\"clear\":function($event){return _vm.selectClear('level')}},model:{value:(_vm.queryParam.conditions.level),callback:function ($$v) {_vm.$set(_vm.queryParam.conditions, \"level\", $$v)},expression:\"queryParam.conditions.level\"}},_vm._l((_vm.messageLevels),function(item){return _c('el-option',{attrs:{\"label\":item.name,\"value\":item.value}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"查询\")])],1)],1),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.create}},[_vm._v(\"创建\")]),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.listData,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"header\",\"label\":\"消息头\",\"width\":\"380\"}}),_c('el-table-column',{attrs:{\"prop\":\"level\",\"label\":\"消息等级\",\"width\":\"180\",\"formatter\":_vm.formatLevel}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"消息状态\",\"formatter\":_vm.formatStatus}}),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"创建时间\"}}),_c('el-table-column',{attrs:{\"prop\":\"sendTime\",\"label\":\"发送时间\",\"formatter\":_vm.formatSendTime}}),_c('el-table-column',{attrs:{\"prop\":\"creator\",\"label\":\"创建者\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.detail(scope.row)}}},[_vm._v(\"详情\")]),(scope.row.status === 0)?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.send(scope.row)}}},[_vm._v(\"发送\")]):_vm._e(),(scope.row.status === 0)?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.update(scope.row)}}},[_vm._v(\"修改\")]):_vm._e(),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.doDelete(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-row',{staticStyle:{\"margin-top\":\"25px\"},attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":4,\"offset\":18}},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":_vm.pageInfo.layout,\"total\":_vm.pageInfo.total}})],1)],1),_c('el-dialog',{attrs:{\"title\":_vm.title,\"visible\":_vm.dialogVisible,\"width\":\"40%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.formData,\"label-width\":\"200px\",\"size\":\"medium\"}},[_c('el-form-item',{attrs:{\"label\":\"消息头\",\"prop\":\"header\",\"disabled\":_vm.isDetail}},[_c('el-input',{staticStyle:{\"width\":\"350px\"},model:{value:(_vm.formData.header),callback:function ($$v) {_vm.$set(_vm.formData, \"header\", $$v)},expression:\"formData.header\"}})],1),_c('el-form-item',{attrs:{\"label\":\"消息内容\",\"prop\":\"content\",\"disabled\":_vm.isDetail}},[_c('el-input',{staticStyle:{\"width\":\"350px\"},attrs:{\"type\":\"textarea\",\"rows\":\"15\"},model:{value:(_vm.formData.content),callback:function ($$v) {_vm.$set(_vm.formData, \"content\", $$v)},expression:\"formData.content\"}})],1),_c('el-form-item',{attrs:{\"label\":\"消息等级\",\"prop\":\"level\",\"disabled\":_vm.isDetail}},[_c('el-select',{staticStyle:{\"width\":\"350px\"},attrs:{\"placeholder\":\"\"},model:{value:(_vm.formData.level),callback:function ($$v) {_vm.$set(_vm.formData, \"level\", $$v)},expression:\"formData.level\"}},_vm._l((_vm.messageLevels),function(item){return _c('el-option',{attrs:{\"label\":item.name,\"value\":item.value}})}),1)],1),(_vm.isDetail)?_c('el-form-item',{attrs:{\"label\":\"消息状态\",\"prop\":\"status\",\"disabled\":_vm.isDetail}},[_c('el-select',{staticStyle:{\"width\":\"350px\"},attrs:{\"placeholder\":\"\"},model:{value:(_vm.formData.status),callback:function ($$v) {_vm.$set(_vm.formData, \"status\", $$v)},expression:\"formData.status\"}},_vm._l((_vm.messageStatus),function(item){return _c('el-option',{attrs:{\"label\":item.name,\"value\":item.value}})}),1)],1):_vm._e(),(_vm.isDetail)?_c('el-form-item',{attrs:{\"label\":\"创建时间\",\"prop\":\"createTime\",\"disabled\":_vm.isDetail}},[_c('el-input',{staticStyle:{\"width\":\"350px\"},model:{value:(_vm.formData.createTime),callback:function ($$v) {_vm.$set(_vm.formData, \"createTime\", $$v)},expression:\"formData.createTime\"}})],1):_vm._e(),(_vm.isDetail)?_c('el-form-item',{attrs:{\"label\":\"发送时间\",\"prop\":\"sendTime\",\"disabled\":_vm.isDetail}},[_c('el-input',{staticStyle:{\"width\":\"350px\"},model:{value:(_vm.formData.sendTime),callback:function ($$v) {_vm.$set(_vm.formData, \"sendTime\", $$v)},expression:\"formData.sendTime\"}})],1):_vm._e(),(_vm.isDetail)?_c('el-form-item',{attrs:{\"label\":\"创建人\",\"prop\":\"creator\",\"disabled\":_vm.isDetail}},[_c('el-input',{staticStyle:{\"width\":\"350px\"},model:{value:(_vm.formData.creator),callback:function ($$v) {_vm.$set(_vm.formData, \"creator\", $$v)},expression:\"formData.creator\"}})],1):_vm._e(),(_vm.isDetail)?_c('el-form-item',[_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1):_vm._e(),(!_vm.isDetail)?_c('el-form-item',[(_vm.formData.id)?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.doUpdate}},[_vm._v(\"保存\")]):_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.doCreate}},[_vm._v(\"立即创建\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.send}},[_vm._v(\"立即发送\")]),_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div style=\"margin-top: 40px\">\r\n        <el-form :inline=\"true\" :model=\"queryParam\" class=\"demo-form-inline\">\r\n            <el-form-item label=\"消息头\">\r\n                <el-input v-model=\"queryParam.name\" placeholder=\"消息头\" clearable></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"消息状态\">\r\n                <el-select v-model=\"queryParam.conditions.status\" placeholder=\"\" clearable @clear=\"selectClear('level')\">\r\n                    <el-option :label=\"item.name\" :value=\"item.value\" v-for=\"item in messageStatus\"></el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"消息等级\">\r\n                <el-select v-model=\"queryParam.conditions.level\" placeholder=\"\" clearable @clear=\"selectClear('level')\">\r\n                    <el-option :label=\"item.name\" :value=\"item.value\" v-for=\"item in messageLevels\" ></el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"onSubmit\">查询</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n\r\n        <el-button type=\"primary\" @click=\"create\">创建</el-button>\r\n\r\n        <el-table\r\n                :data=\"listData\"\r\n                stripe\r\n                style=\"width: 100%\">\r\n            <el-table-column\r\n                    prop=\"header\"\r\n                    label=\"消息头\"\r\n                    width=\"380\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                    prop=\"level\"\r\n                    label=\"消息等级\"\r\n                    width=\"180\"\r\n                    :formatter=\"formatLevel\"\r\n            >\r\n            </el-table-column>\r\n            <el-table-column\r\n                    prop=\"status\"\r\n                    label=\"消息状态\"\r\n                    :formatter=\"formatStatus\"\r\n            >\r\n            </el-table-column>\r\n            <el-table-column\r\n                    prop=\"createTime\"\r\n                    label=\"创建时间\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                    prop=\"sendTime\"\r\n                    label=\"发送时间\"\r\n                    :formatter=\"formatSendTime\"\r\n            >\r\n            </el-table-column>\r\n            <el-table-column\r\n                    prop=\"creator\"\r\n                    label=\"创建者\"\r\n            >\r\n            </el-table-column>\r\n\r\n            <el-table-column\r\n                    label=\"操作\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button type=\"text\"  @click=\"detail(scope.row)\">详情</el-button>\r\n                    <el-button type=\"text\" v-if=\"scope.row.status === 0\" @click=\"send(scope.row)\">发送</el-button>\r\n                    <el-button type=\"text\" v-if=\"scope.row.status === 0\" @click=\"update(scope.row)\">修改</el-button>\r\n                    <el-button type=\"text\" @click=\"doDelete(scope.row)\">删除</el-button>\r\n                </template>\r\n\r\n            </el-table-column>\r\n        </el-table>\r\n        <el-row :gutter=\"20\" style=\"margin-top: 25px\">\r\n            <el-col :span=\"4\" :offset=\"18\">\r\n                <el-pagination\r\n                        background\r\n                        :layout=pageInfo.layout\r\n                        :total=\"pageInfo.total\">\r\n                </el-pagination>\r\n            </el-col>\r\n        </el-row>\r\n\r\n\r\n        <el-dialog\r\n                :title=\"title\"\r\n                :visible.sync=\"dialogVisible\"\r\n                width=\"40%\">\r\n            <el-form ref=\"form\"  :model=\"formData\" label-width=\"200px\" size=\"medium\">\r\n                <el-form-item label=\"消息头\" prop=\"header\" :disabled=\"isDetail\">\r\n                    <el-input v-model=\"formData.header\" style=\"width: 350px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"消息内容\" prop=\"content\" :disabled=\"isDetail\">\r\n                    <el-input v-model=\"formData.content\" type=\"textarea\"   rows=\"15\" style=\"width: 350px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"消息等级\" prop=\"level\" :disabled=\"isDetail\">\r\n                    <el-select v-model=\"formData.level\" placeholder=\"\" style=\"width: 350px\">\r\n                        <el-option :label=\"item.name\" :value=\"item.value\" v-for=\"item in messageLevels\"></el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item v-if=\"isDetail\" label=\"消息状态\" prop=\"status\" :disabled=\"isDetail\">\r\n                    <el-select v-model=\"formData.status\" placeholder=\"\" style=\"width: 350px\">\r\n                        <el-option :label=\"item.name\" :value=\"item.value\" v-for=\"item in messageStatus\"></el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item v-if=\"isDetail\" label=\"创建时间\" prop=\"createTime\" :disabled=\"isDetail\">\r\n                    <el-input v-model=\"formData.createTime\" style=\"width: 350px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item v-if=\"isDetail\" label=\"发送时间\" prop=\"sendTime\" :disabled=\"isDetail\">\r\n                    <el-input v-model=\"formData.sendTime\" style=\"width: 350px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item v-if=\"isDetail\" label=\"创建人\" prop=\"creator\" :disabled=\"isDetail\">\r\n                    <el-input v-model=\"formData.creator\" style=\"width: 350px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item v-if=\"isDetail\">\r\n                    <el-button @click=\"cancel\">取消</el-button>\r\n                </el-form-item>\r\n                <el-form-item v-if=\"!isDetail\">\r\n                    <el-button type=\"primary\" v-if=\"formData.id\" @click=\"doUpdate\">保存</el-button>\r\n                    <el-button type=\"primary\" v-else @click=\"doCreate\">立即创建</el-button>\r\n                    <el-button type=\"primary\" @click=\"send\">立即发送</el-button>\r\n                    <el-button @click=\"cancel\">取消</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-dialog>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {listMessage,sendMessage,createMessage,deleteMessage,updateMessage} from \"../../../api/messageApi\"\r\n    export default {\r\n        name: \"managerList\",\r\n        data() {\r\n            return {\r\n                listData: [],\r\n                queryParam: {\r\n                    \"pageNumber\": 1,\r\n                    \"pageSize\": 10,\r\n                    \"name\": null,\r\n                    \"conditions\": {\r\n                        \"status\": null,\r\n                        \"level\": null\r\n                    }\r\n\r\n                },\r\n                dialogVisible: false,\r\n                formData: {\r\n                    id: null,\r\n                    header: null,\r\n                    content: null,\r\n                    level: null,\r\n                    status: null,\r\n                    createTime: null,\r\n                    sendTime: null,\r\n                    creator: null\r\n                },\r\n                managerList: [\r\n                    {\r\n                        \"name\": \"SmsAdmin\",\r\n                        \"code\": \"SmsAdmin\"\r\n                    }\r\n                ],\r\n                pageInfo: {\r\n                    layout: \"prev, pager, next, jumper, total\",\r\n                    total: 10\r\n                },\r\n                messageLevels: [\r\n                    {\r\n                        \"name\": \"一般\",\r\n                        \"value\": 1\r\n                    },\r\n                    {\r\n                        \"name\": \"中等\",\r\n                        \"value\": 2\r\n                    },\r\n                    {\r\n                        \"name\": \"重要\",\r\n                        \"value\": 3\r\n                    }\r\n                ],\r\n                messageStatus: [\r\n                    {\r\n                        \"name\": \"保存未发送\",\r\n                        \"value\": 0\r\n                    },\r\n                    {\r\n                        \"name\": \"已发送\",\r\n                        \"value\": 1\r\n                    },\r\n                ],\r\n                isDetail: false,\r\n                title: \"创建消息\"\r\n            }\r\n        },\r\n        created() {\r\n            this.onSubmit()\r\n        },\r\n        methods: {\r\n            listMessages() {\r\n                listMessage(this.queryParam).then(res => {\r\n                    this.listData = res.data.first\r\n                    this.pageInfo.total = res.data.second\r\n                })\r\n            },\r\n            create() {\r\n                this.dialogVisible = true\r\n                this.initFormData()\r\n            },\r\n            doCreate() {\r\n                createMessage(this.formData).then(res => {\r\n                    this.dialogVisible = false\r\n                    this.initFormData()\r\n                    this.$message({\r\n                        message: '创建成功',\r\n                        type: 'success'\r\n                    });\r\n                    this.listMessages()\r\n                })\r\n            },\r\n            onSubmit() {\r\n                this.listMessages()\r\n            },\r\n            formatLevel(row,column) {\r\n                if (row.level === 1) {\r\n                    return \"一般\"\r\n                } else if (row.level === 2) {\r\n                    return \"中等\"\r\n                } else {\r\n                    return \"重要\"\r\n                }\r\n            },\r\n            formatStatus(row,column) {\r\n                if (row.status === 0) {\r\n                    return \"保存未发送\"\r\n                } else {\r\n                    return \"已发送\"\r\n                }\r\n            },\r\n            formatSendTime(row,column) {\r\n                if (row.sendTime == null) {\r\n                    return \"-\"\r\n                }\r\n                return row.sendTime\r\n            },\r\n            initFormData(row) {\r\n                if (row != null) {\r\n                    this.formData = {\r\n                        id: row.id,\r\n                        header: row.header,\r\n                        content: row.content,\r\n                        level: row.level,\r\n                        status: row.status,\r\n                        createTime: row.createTime,\r\n                        sendTime: row.sendTime,\r\n                        creator: row.creator\r\n                    }\r\n                } else {\r\n                    this.formData = {\r\n                        id: null,\r\n                        header: null,\r\n                        content: null,\r\n                        level: null,\r\n                        status: null,\r\n                        createTime: null,\r\n                        sendTime: null,\r\n                        creator: null\r\n                    }\r\n                }\r\n\r\n            },\r\n            send() {\r\n                sendMessage(this.formData).then(res => {\r\n                    this.dialogVisible = false\r\n                    this.initFormData()\r\n                    this.$message({\r\n                        message: '发送成功',\r\n                        type: 'success'\r\n                    });\r\n                    this.listMessages()\r\n                })\r\n            },\r\n            update(row) {\r\n                this.title = \"编辑消息\"\r\n                this.initFormData(row);\r\n                this.dialogVisible = true\r\n            },\r\n            doUpdate() {\r\n                updateMessage(this.formData).then(res => {\r\n                    this.dialogVisible = false\r\n                    this.initFormData()\r\n                    this.$message({\r\n                        message: '修改成功',\r\n                        type: 'success'\r\n                    });\r\n                    this.listMessages()\r\n                }).catch(error =>{\r\n                    this.dialogVisible = false\r\n                    this.initFormData()\r\n                    this.$message({\r\n                        message: '修改失败',\r\n                        type: 'error'\r\n                    });\r\n                    this.listMessages()\r\n                } )\r\n            },\r\n            doDelete(row) {\r\n                const params = []\r\n                params.push(row.id)\r\n                deleteMessage(params).then(res => {\r\n                    this.$message({\r\n                        message: '删除成功',\r\n                        type: 'success'\r\n                    });\r\n                    this.listMessages()\r\n                })\r\n            },\r\n            detail(row) {\r\n                this.title = \"消息详情\"\r\n                this.initFormData(row);\r\n                this.isDetail = true\r\n                this.dialogVisible = true\r\n            },\r\n            cancel() {\r\n                this.dialogVisible = false\r\n                this.isDetail = false\r\n            },\r\n            selectClear(data) {\r\n                this.queryParam.conditions[data] = null\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./managerList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./managerList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./managerList.vue?vue&type=template&id=67903434&scoped=true&\"\nimport script from \"./managerList.vue?vue&type=script&lang=js&\"\nexport * from \"./managerList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"67903434\",\n  null\n  \n)\n\nexport default component.exports","import {postRequest,putRequest,deleteRequest,getRequest} from \"../utils/request\";\r\n\r\nexport const listMessage = (params) => {\r\n    return postRequest(\"/uiapi/v1/message/list\", params)\r\n}\r\n\r\nexport const createMessage = (params) => {\r\n    return postRequest(\"/uiapi/v1/message/add\", params)\r\n}\r\n\r\nexport const sendMessage = (params) => {\r\n    return postRequest(\"/uiapi/v1/message/send\", params)\r\n}\r\n\r\nexport const deleteMessage = (params) => {\r\n    return deleteRequest(\"/uiapi/v1/message/delete\", params)\r\n}\r\n\r\nexport const updateMessage = (params) => {\r\n    return putRequest(\"/uiapi/v1/message/update\", params)\r\n}\r\n\r\n\r\nexport const listMessageByUserId = (params) => {\r\n    return postRequest(\"/uiapi/v1/message/list/user\", params)\r\n}\r\n\r\nexport const updateMessageStatus = (userId,messageId) => {\r\n    return putRequest(\"/uiapi/v1/message/update/relation?userId=\" + userId + \"&messageId=\" + messageId, null)\r\n}"],"sourceRoot":""}